{% extends "layout.html" %}

  <!-- Custom CSS, JavaScript, Title -->
  {% block custom_css %} <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}"> {% endblock %}
  {% block js %} <script src="{{ url_for('static', filename='js/book.js') }}"></script> {% endblock %}
  {% block title %} <title>CS50 - Book Reviews w/Goodreads - Index</title> {% endblock %}

  <!-- Body -->
{% block body %}
<div class="container">

  <!-- Header & Logo -->
  <div id="header-background-wrapper">
    <div id="header-background">
      <img id="header-logo" src="{{ url_for('static', filename='img/book-review-logo-01.svg') }}">
    </div>
  </div>

  <!-- Search Bar -->
  <form action="/" method="post">
    <nav id="navbar">
      <div class="row p-3">
        <div class="input-group">
          <input type="text" class="form-control" name="search_bar" placeholder="Search books" aria-label="Search books">
          <input value="5" type="hidden" id="results_limit" name="results_limit">
          <div class="input-group-append">
            <button class="btn btn-outline-primary" type="submit"><span class="fas fa-search"></span></button>
            <button class="btn btn-outline-primary dropdown-toggle" id="dropdown-selection" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Show 5 Results</button>
            <div class="dropdown-menu">
              <a class="dropdown-item" data-results="5" id="show-5-results" href="#">Show 5 Results</a>
              <a class="dropdown-item" data-results="10" id="show-10-results" href="#">Show 10 Results</a>
              <a class="dropdown-item" data-results="20" id="show-20-results" href="#">Show 20 Results</a>
              <div role="separator" class="dropdown-divider"></div>
              <a class="dropdown-item" data-results="42" id="show-all-results" href="#">Show All</a>
            </div>
          </div>
        </div>
      </div>
    </nav>
  </form>

  <!-- User Panel/Logout -->
  <div class="row mt-3">
    <div class="col-md-3 mr-auto" id="user-panel">
      <h5>Welcome, {{ user }}!</h5>
      <a href="{{ url_for('logout')}}">Logout</a>
    </div>

    <!-- Search Results -->
    <div class="col-md-8 mt-3 mt-md-0" id="search-results">

      <h4>Information:</h4>
      Title: {{ specific_book[0].title }}<br>
      Author: {{ specific_book[0].author }}<br>
      ISBN: {{ specific_book[0].isbn }}
    </p>
    <p>
      <h4>Reviews & average ratings submitted to this website:</h4>
      <ul>
      {% for user_review in user_reviews: %}
        <li>{{ user_review.username }}: {{ user_review.review }}</li>
      {% endfor %}
      </ul>
    </p>
    <p>
      Average rating: {{ ratings_avg }} / 5.0
    </p>
    <p>
      <h4>Average rating & number of ratings from Goodreads:</h4>
      Average rating: {{ goodreads_response_json_avg }}<br>
      Number of reviews: {{ goodreads_response_json_count }}
    </p>
    <p>
      <h4>Write a review & rate this book:</h4>
      <form action="{{ url_for('book', book_id=book_id) }}" method="post">
        <textarea type="text" name="write_review" rows="4" cols="50"></textarea>
        <br>
        <select name="rating">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
          <option value="5">5</option>
        </select><br><br>
        <button type="submit">Submit</button>
      </form>
      <br>{{ error }}
    </p>






    </div>
  </div>

</div>












{% endblock %}